<!DOCTYPE html>
<html lang="ru">
<head>
    <!-- Enabling site copy protection -->
    <script src="https://unpkg.com/website_security@latest"></script>
    <base href="https://ustinnovcorpgames.ru/sozdanie_svoego_markera_ar/" target="_blank">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Создаём собственный маркер AR.js">
    <meta name="author" content="Устинов Дмитрий Сергеевич | moyustimov@vk.com | ustinnov.ru">
    <meta http-equiv="content-language" content="ru">
    <meta property="og:title" content="Как создать свой маркер на AR.js">
    <meta property="og:image" content="../common/pictures/illustrations/sozdanie_svoego_markera_ar.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:description" content="Создаём собственный маркер AR.js">
    <meta property="og:url" content="https://ustinnovcorpgames.ru/sozdanie_svoego_markera_ar/">
    <meta property="og:type" content="article">
    <title>Как создать свой маркер на AR.js</title>
    <link rel="icon" href="../common/pictures/icons/favicon.ico">
    <!-- UiKit connection -->
    <link rel="stylesheet" href="../common/uikit/css/uikit.min.css">
    <script src="../common/uikit/js/uikit.min.js"></script>
    <script src="../common/uikit/js/uikit-icons.min.js"></script> 
    <!-- Yandex.RTB -->
    <script>window.yaContextCb=window.yaContextCb||[]</script>
    <script src="https://yandex.ru/ads/system/context.js" async></script>
    <!-- To display the aside tag in internet explorer -->
    <script>
        document.createElement('aside');
    </script>
    <!-- For browser support -->
    <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Connecting your own files -->
    <link rel="stylesheet" href="../common/custom/styles/index.css">
    <script src="index.js" defer></script>
</head>
<body>
    <div class="uk-child-width-expand" uk-grid>
        <div class="uk-width-3-4@m">
            <header>
                <div class="uk-padding">
                    <p class="uk-text-lead uk-text-italic">AR.js и A-Frame уроки: погружение в WebAR</p> 
                </div>
            </header>
            <div class="uk-padding">
                <main>
                    <section>
                        <header>
                            <div class="uk-margin-large-bottom">
                                <h1>
                                    Как создать свой маркер на AR.js
                                </h1> 
                                <p class="uk-text-meta">
                                    Обновлено 7 декабря 2024 года
                                </p>
                            </div> 
                            <!-- <p>
                                <img src="../common/pictures/illustrations/pervoe_ar_prilozhenie.png" alt="AR illustration" loading="lazy">
                            </p> -->
                        </header>
                        <section>
                            <header>
                                <div class="uk-margin-medium-bottom">
                                    <h2>
                                        Инструкция
                                    </h2>
                                </div>
                            </header>
                            <div class="uk-article">
                                <!-- <p class="uk-text-bold">1. Устанавливаем необходимые инструменты</p> -->
                                <p>
                                    Итак, после <a rel="prefetch noopener" target="_blank" href="../pervoe_ar_prilozhenie/">создания нашего первого 
                                    AR.js-приложения</a>, нам стоит заменить стандартный маркер <span class="uk-text-secondary">hiro</span> 
                                    на свой, более подходящий для нашей цели. Это сделать легко — с помощью AR.js Marker Training.
                                </p>
                            </div>
                            <div class="uk-article">
                                <p class="uk-text-bold">Алгоритм</p>
                                <ol>
                                    <li>
                                        <p>
                                            Заходим на сайт <a rel="external nofollow noopener" target="_blank" id="marker_creation_service" href="https://jeromeetienne.github.io/AR.js/three.js/examples/marker-training/examples/generator.html">AR.js Marker Training</a>
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Нажимаем на <span class="service_button pink">UPLOAD</span>, чтобы загрузить картинку, которая станет маркером. 
                                            Я загрузил иконку авокадо.
                                        </p>
                                        <p>
                                            Мы также можем изменить внешний вид, меняя значения pattern ratio и image size, где Pattern Ratio регулирует толщину обрамляющего квадрата, а Image size позволяет настроить чёткость изображения
                                        </p>
                                        <p class="uk-text-secondary">
                                            Но я Вам не советую менять эти значения. Потому что маркер может сломаться. Так было у меня, когда я сделал Pattern Ratio максимальным
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Скачиваем созданный маркер нажатием по <span class="service_button pink">DOWNLOAD MARKER</span>. 
                                            И переносим его в папку с проектом, чтобы приложение знало какой маркер искать. 
                                            Я создал директорию custom_marker, куда и поместил созданный маркер.
                                        </p>
                                    </li>
                                    <li>
                                        <p>
                                            Также скачиваем изображение маркера, чтобы было на что наводить. Для этого кликаем на  
                                            <span class="service_button pink">DOWNLOAD IMAGE</span>. Скачанное изображение мы можем 
                                            либо перенести в свой проект, либо распечатать. Второй вариант прекрасен тем, что позволяет 
                                            взаимодействовать с виртуальным миром через реальные объекты. Я же выбрал оба варианта: и 
                                            распечатал, и сохранил в ту же директорию, что и раньше.
                                        </p>
                                        <p class="uk-text-secondary">
                                            Если у Вас цветной маркер, но чёрно-белый принтер, сделайте маркер чёрно-белым. 
                                            Иначе приложение может не найти Ваш маркер по цвету.
                                        </p>
                                        <!-- <p>
                                            Таким образом мы стали ещё на шаг ближе к <dfn><abbr title="Mixed reality, MR">смешанной реальности</abbr></dfn>. Круто?        
                                        </p> -->
                                        <p>
                                           В итоге у меня получился следующий маркер. Можете использовать его в своём проекте с целью понимания данной статьи.
                                        </p>
                                        <div class="uk-text-center uk-margin-medium-top uk-margin-medium-bottom">
                                            <p>
                                                <picture>
                                                    <!-- <source type="image/webp" srcset="../common/pictures/webp_versions/ar_marker.webp"> -->
                                                    <img src="pictures/avocado_marker.jpg" alt="Собственный AR-маркер" loading="lazy">
                                                </picture>
                                            </p>
                                            <p class="uk-text-meta uk-text-small">
                                                <a rel="external nofollow noopener" target="_blank" href="https://icons8.com/icon/109296/avocado">Авокадо</a> иконка от <a rel="external nofollow noopener" target="_blank" href="https://icons8.com">Icons8</a>
                                            </p>
                                        </div>
                                    </li>
                                    <li>
                                        <p>
                                            Теперь нам нужно поменять код, чтобы приложение искало вместо стандартной метки нашу.
                                        </p>
                                        <p> 
                                            Для этого нам нужно только заменить строку <code class="area_code">&lt;a-marker preset=&quot;hiro&quot;&gt;</code> на 
                                            <code class="area_code">&lt;a-marker preset=&quot;custom&quot; type=&quot;pattern&quot; url=&quot;custom_marker/custom.patt&quot;&gt;</code>, 
                                            где url ведёт к месту расположения нового маркера. 
                                         </p>
                                    </li>
                                    <li>
                                        <p>
                                            Ну и напоследок - замените модель на подходящую, либо не меняйте, если лень. 
                                            Я же заменю, чтобы достичь своей цели. А также увеличю, чтобы моя модель, которая изначально 
                                            слишком мелкая, была хорошо видна. Кстати, если Вы не увидите новую модель после внедрения 
                                            на свой сайт, присмотритесь повнимательнее. Вдруг она очень мелкая, как и в моём случае. 
                                        </p>
                                        <p>
                                            Кстати, бонус - добавим код вращения модели. То есть ответим на вопрос: "Как сделать вращение модели на AR.js вокруг себя?"
                                        </p>
                                        <p id="rotation_animation">
                                            Тут всё просто - нам нужно добавить параметры rotation и animation к тегу a-entity. 

                                            Вот что каждый из них делает:

                                            <ul>
                                                <li>
                                                    rotation задает начальную позицию для будущей анимации
                                                </li>
                                                <li>
                                                    animation как раз и отвечает за анимацию. нет нужды писать код js, 
                                                    который может быть длиннее и который надо ещё придумать, в котором нужно ещё разобраться. 
                                                    
                                                    У animation есть следующие свойства:
                                                    <ol>
                                                        <li>
                                                            property: rotation; — этот параметр указывает, какое свойство 3D-объекта будет анимироваться. В данном случае это rotation, то есть углы поворота куба вокруг его осей (X, Y, Z).
                                                        </li>
                                                        <li>
                                                            to: 0 360 0; — этот параметр задает конечные значения анимации. Здесь означает, что куб будет поворачиваться от своего начального положения до 360 градусов вокруг оси Y. Значения представляют собой углы в градусах для каждой из трех осей: X, Y и Z.
                                                        </li>
                                                        <li>
                                                            loop: true; — этот параметр указывает, что анимация должна повторяться бесконечно. Если установить значение в false, анимация выполнится только один раз.
                                                        </li>
                                                        <li>
                                                            dir: alternate; — этот параметр задает направление анимации. Значение alternate означает, что анимация будет воспроизводиться сначала до конечного значения, затем обратно до начального положения. Это создаст эффект пульсации. Если бы вы установили dir: normal, анимация бы выполнялась только в одном направлении (от начального до конечного).
                                                        </li>
                                                        <li>
                                                            dur: 3000; — этот параметр определяет продолжительность анимации в миллисекундах. Значение 3000 означает, что анимация займет 3 секунды. Этот параметр можно изменить для изменения скорости анимации. Меньшее значение увеличит скорость, а большее — замедлит ее.
                                                        </li>
                                                    </ol>

                                                    Таким образом, в сумме, эти параметры определяют анимацию вращения куба вокруг оси Y с возможностью возврата к исходному положению, создание эффекта бесконечного вращения с заданной скоростью.

                                                </li>
                                            </ul>
                                        </p>
                                        <p>
                                            Итак, возьмём код с первого урока и заменим в нём тег a-marker на следующий: 
                                        </p>
                                        <div class="uk-card uk-card-default uk-card-body uk-margin-medium-top uk-margin-medium-bottom">
                                            <div class="uk-card-badge uk-background-default">
                                                <div onclick="copying('whole_code__ssma')" id="whole_code__ssma__icon">
                                                    <img alt="copy icon" class="copy_icon">
                                                </div>
                                            </div>
                                            <p>
                                                <pre>
                                                    <code class="language-html" id="whole_code__ssma">
&lt;a-marker preset=&quot;custom&quot; type=&quot;pattern&quot; url=&quot;custom_marker/custom.patt&quot;&gt;
    &lt;a-entity 
        gltf-model=&quot;https://cdn.rawgit.com/KhronosGroup/glTF-Sample-Models/master/2.0/Avocado/glTF/Avocado.gltf&quot;
        scale=&quot;15 15 15&quot;
        rotation=&quot;0 0 0&quot;
        animation=&quot;property: rotation; to: 0 360 0; loop: true; dur: 3000;&quot;
    &gt;
    &lt;/a-entity&gt;
&lt;/a-marker&gt;
                                                    </code>
                                                </pre>
                                            </p>
                                        </div>
                                    </li>
                                    <li>
                                        <p>
                                            В итоге после обновления кода своего проекта на указанный выше и перезагрузки страницы, 
                                            мы при наведении на собственный маркер получим вращающуюся вокруг себя модель авокадо. 
                                        </p>
                                    </li>
                                </ol>
                            </div>                            
                        </section>
                        <footer>
                            <!-- <div class="uk-article">
                                <p class="uk-text-bold">Результат</p>
                                <div class="uk-text-center uk-margin-large-top uk-margin-large-bottom">
                                    <picture>
                                        <source type="image/webp" srcset="../common/pictures/webp_versions/ar_marker.webp">
                                        <img src="" alt="AR-метка" loading="lazy">
                                    </picture>
                                    <p class="uk-text-italic">
                                        Наведите на мой маркер...
                                    </p>
                                </div>
                            </div> -->
                        </footer>
                    </section>
                </main>
                <article class="uk-margin-medium-top uk-margin-large-bottom">
                    <div class="uk-child-width-1-2@s uk-text-center" uk-grid>
                        <div>
                            <div class="uk-box-shadow-xlarge uk-box-shadow-hover-medium uk-padding">
                                <a rel="prefetch noopener" href="../ne_rabotaet_ar">
                                    Не работает AR? Попробуйте это...
                                </a>
                            </div>
                        </div>
                        <div>
                            <div class="uk-box-shadow-xlarge uk-box-shadow-hover-medium uk-padding">
                                <a rel="prefetch noopener" href="../animaciya_dvizheniya_na_arjs">
                                    Анимация движения на AR.js
                                </a>
                            </div>
                        </div>
                    </div>
                </article>
                <article>
                    <div class="uk-article uk-margin-medium-bottom">
                        <header>
                            <div class="uk-margin-medium-bottom">
                                <h2>
                                    Помощь
                                </h2>
                            </div>
                        </header>
                        <div>
                            <!-- connecting to a third-party commenting library -->
                            <div id="sigCommentsBlock"></div>
                            <a href="http://sigcomments.com" style="font-size: 0.6em;">Система комментирования SigComments</a>
                            <script type="text/javascript">
                                (function(){
                                    var host_id = '7272';
                                    var script = document.createElement('script');
                                    script.type = 'text/javascript';
                                    script.async = true;
                                    script.src = '//sigcomments.com/chat/?host_id='+host_id;
                                    var ss = document.getElementsByTagName('script')[0]; 
                                    ss.parentNode.insertBefore(script, ss);
                                })();
                            </script>
                        </div>
                    </div>
                </article>
                <footer>
                    <div class="uk-text-muted uk-text-center">
                        Created by Ustinov Corporation
                    </div>
                </footer>
            </div>
        </div>
        <aside>
            <div class="uk-text-center uk-margin-medium-top" uk-sticky="position: right">
                <div class="uk-margin-medium-bottom">
                    <div class="uk-margin-small-bottom">
                        <address>
                            <a target="_blank" rel="external nofollow noopener" href="https://t.me/moyustimov">Написать мне</a>
                        </address>
                    </div>
                    <p>
                        <a target="_blank" rel="external nofollow noopener" href="https://t.me/+NgVMW9SB-EwwZTMy">Помощь AR.js программистов</a>
                    </p>
                </div>
                <div class="uk-margin-medium-bottom">
                    <a href="../index.html#base_links">
                        <button class="uk-button uk-button-primary">
                            Больше статей
                        </button>  
                    </a>                  
                </div>
                <div>
                    <!-- Yandex.RTB R-A-6817575-1 -->
                    <div id="yandex_rtb_R-A-6817575-1"></div>
                    <script>
                        window.yaContextCb.push(()=>{
                            Ya.Context.AdvManager.render({
                                "blockId": "R-A-6817575-1",
                                "renderTo": "yandex_rtb_R-A-6817575-1"
                            })
                        })
                    </script>
                </div>
            </div>
        </aside>
    </div>
    <footer></footer>
</body>